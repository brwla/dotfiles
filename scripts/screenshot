#!/usr/bin/env bash

SAVE_DIR="$HOME/Pictures/Screenshots"
mkdir -p "$SAVE_DIR"

timestamp() {
    date +'%Y-%m-%d_%H-%M-%S'
}

notify() {
    notify-send -h string:x-canonical-private-synchronous:screenshot -u low "$1" "$2"
}

# Fullscreen screenshot to file
screenshot_full() {
    local filename="$SAVE_DIR/Screenshot_$(timestamp).png"
    grim "$filename" && notify "Screenshot" "Saved to $SAVE_DIR"
}

# Area screenshot to file
screenshot_area() {
    local filename="$SAVE_DIR/Screenshot_$(timestamp).png"
    grim -g "$(slurp)" "$filename" && notify "Screenshot" "Saved to $SAVE_DIR"
}

# Fullscreen screenshot to clipboard
screenshot_copy_full() {
    grim - | wl-copy && notify "Screenshot" "Copied to clipboard"
}

# Area screenshot to clipboard
screenshot_copy_area() {
    grim -g "$(slurp)" - | wl-copy && notify "Screenshot" "Copied to clipboard"
}

usage() {
    echo "Usage: $0 [--full | --area | --copy-full | --copy-area]"
    exit 1
}

# Handle arguments
case "$1" in
    --full)
        screenshot_full
        ;;
    --area)
        screenshot_area
        ;;
    --copy-full)
        screenshot_copy_full
        ;;
    --copy-area)
        screenshot_copy_area
        ;;
    *)
        usage
        ;;
esac
